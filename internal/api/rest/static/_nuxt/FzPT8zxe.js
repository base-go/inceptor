import{u as S,_ as B,a as F}from"./DxKJ2GxV.js";import{_ as R}from"./DqAQajp0.js";import{_ as M}from"./Cf-73Gro.js";import{_ as L}from"./C2IJeqfz.js";import{_ as P}from"./Di-NiOv2.js";import{_ as T}from"./fk77mUdf.js";import{e as h,g as q,c as g,a as t,b as s,w as o,h as n,F as K,r as z,k as U,i as A,m as p,o as f,d as a,t as b}from"./DEZBpJ03.js";import"./BYvTOXo1.js";import"./DlAUqK2U.js";const E={class:"space-y-6"},H={class:"flex items-center justify-between"},G={key:0,class:"flex items-center justify-center py-12"},J={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},O={class:"flex items-start justify-between"},Q={class:"text-lg font-semibold text-white"},W={class:"text-sm text-gray-500 mt-1"},X={class:"mt-4 space-y-2"},Y={class:"flex items-center justify-between text-sm"},Z={class:"text-gray-300 font-mono text-xs"},ee={class:"flex items-center justify-between text-sm"},te={class:"text-gray-300"},se={class:"mt-4 pt-4 border-t border-gray-700"},oe={class:"space-y-4"},le={class:"flex justify-end gap-2"},ne={class:"flex items-center gap-2 text-green-500"},ae={class:"space-y-4"},ie={class:"flex gap-2"},re={class:"flex justify-end"},ge=h({__name:"index",setup(de){const k=S(),w=p([]),c=p(!0),d=p(!1),u=p(""),x=p(30),i=p(null),C=async()=>{if(!k.isAuthenticated.value){c.value=!1;return}try{c.value=!0;const r=await k.getApps();w.value=r.data||[]}catch(r){console.error("Failed to load apps:",r)}finally{c.value=!1}};q(C);const $=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),N=async()=>{if(u.value.trim())try{i.value=await k.createApp(u.value.trim(),x.value),d.value=!1,u.value="",x.value=30,C()}catch(r){console.error("Failed to create app:",r)}},D=()=>{i.value?.api_key&&navigator.clipboard.writeText(i.value.api_key)};return(r,e)=>{const m=B,y=F,j=R,v=M,_=L,V=P,I=T;return f(),g("div",E,[t("div",H,[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold"},"Registered Apps",-1)),s(m,{icon:"i-heroicons-plus",onClick:e[0]||(e[0]=l=>d.value=!0)},{default:o(()=>[...e[8]||(e[8]=[a(" Create App ",-1)])]),_:1})]),n(c)?(f(),g("div",G,[s(y,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-primary-500"})])):n(w).length?(f(),g("div",J,[(f(!0),g(K,null,z(n(w),l=>(f(),U(v,{key:l.id},{default:o(()=>[t("div",O,[t("div",null,[t("h3",Q,b(l.name),1),t("p",W,"Created "+b($(l.created_at)),1)]),s(y,{name:"i-heroicons-squares-2x2",class:"w-8 h-8 text-primary-500"})]),t("div",X,[t("div",Y,[e[10]||(e[10]=t("span",{class:"text-gray-400"},"App ID",-1)),t("code",Z,b(l.id.slice(0,8))+"...",1)]),t("div",ee,[e[11]||(e[11]=t("span",{class:"text-gray-400"},"Retention",-1)),t("span",te,b(l.retention_days)+" days",1)])]),t("div",se,[s(j,{to:`/?app_id=${l.id}`},{default:o(()=>[s(m,{variant:"ghost",size:"sm",class:"w-full"},{default:o(()=>[...e[12]||(e[12]=[a(" View Dashboard ",-1)])]),_:1})]),_:1},8,["to"])])]),_:2},1024))),128))])):(f(),U(v,{key:2,class:"text-center py-12"},{default:o(()=>[s(y,{name:"i-heroicons-squares-2x2",class:"w-12 h-12 mx-auto text-gray-600"}),e[14]||(e[14]=t("h3",{class:"mt-4 text-lg font-medium text-white"},"No apps registered",-1)),e[15]||(e[15]=t("p",{class:"mt-2 text-gray-400"},"Create your first app to start tracking crashes.",-1)),s(m,{class:"mt-4",onClick:e[1]||(e[1]=l=>d.value=!0)},{default:o(()=>[...e[13]||(e[13]=[a(" Create App ",-1)])]),_:1})]),_:1})),s(V,{modelValue:n(d),"onUpdate:modelValue":e[5]||(e[5]=l=>A(d)?d.value=l:null)},{default:o(()=>[s(v,null,{header:o(()=>[...e[16]||(e[16]=[t("h3",{class:"text-lg font-semibold"},"Create New App",-1)])]),footer:o(()=>[t("div",le,[s(m,{variant:"ghost",onClick:e[4]||(e[4]=l=>d.value=!1)},{default:o(()=>[...e[20]||(e[20]=[a("Cancel",-1)])]),_:1}),s(m,{disabled:!n(u).trim(),onClick:N},{default:o(()=>[...e[21]||(e[21]=[a("Create",-1)])]),_:1},8,["disabled"])])]),default:o(()=>[t("div",oe,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"App Name",-1)),s(_,{modelValue:n(u),"onUpdate:modelValue":e[2]||(e[2]=l=>A(u)?u.value=l:null),placeholder:"My Flutter App"},null,8,["modelValue"])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Retention Days",-1)),e[19]||(e[19]=t("p",{class:"text-xs text-gray-500 mb-1"},"How long to keep crash data",-1)),s(_,{modelValue:n(x),"onUpdate:modelValue":e[3]||(e[3]=l=>A(x)?x.value=l:null),type:"number",min:"1",max:"365"},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"]),s(V,{"model-value":!!n(i),"onUpdate:modelValue":e[7]||(e[7]=l=>i.value=null)},{default:o(()=>[s(v,null,{header:o(()=>[t("div",ne,[s(y,{name:"i-heroicons-check-circle",class:"w-6 h-6"}),e[22]||(e[22]=t("h3",{class:"text-lg font-semibold"},"App Created Successfully",-1))])]),footer:o(()=>[t("div",re,[s(m,{onClick:e[6]||(e[6]=l=>i.value=null)},{default:o(()=>[...e[28]||(e[28]=[a("Done",-1)])]),_:1})])]),default:o(()=>[s(I,{color:"yellow",icon:"i-heroicons-exclamation-triangle",class:"mb-4"},{title:o(()=>[...e[23]||(e[23]=[a("Save your API key now!",-1)])]),description:o(()=>[...e[24]||(e[24]=[a(" This is the only time you'll see this API key. Store it securely. ",-1)])]),_:1}),t("div",ae,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"App Name",-1)),s(_,{"model-value":n(i)?.name,readonly:""},null,8,["model-value"])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"API Key",-1)),t("div",ie,[s(_,{"model-value":n(i)?.api_key,readonly:"",class:"flex-1 font-mono text-sm"},null,8,["model-value"]),s(m,{icon:"i-heroicons-clipboard-document",variant:"outline",onClick:D},{default:o(()=>[...e[26]||(e[26]=[a(" Copy ",-1)])]),_:1})])])])]),_:1})]),_:1},8,["model-value"])])}}});export{ge as default};
