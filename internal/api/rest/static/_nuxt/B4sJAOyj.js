import{_ as L}from"./BAT_9lwm.js";import{_ as R}from"./C29POXRi.js";import{_ as j}from"./11PQt58c.js";import{_ as G}from"./CpvovYk5.js";import{u as K,a as W,_ as q}from"./DhQdksfa.js";import{_ as H}from"./Dvcp86dS.js";import{_ as J,a as Q}from"./BLCJAzSU.js";import{_ as X}from"./C9xZg1J6.js";import{e as Y,f as V,g as Z,c as k,b as o,w as a,m as s,o as w,a as m,k as v,h as l,R as U,t as p,d as D,l as ee}from"./C2I5neRf.js";import"./DlAUqK2U.js";import"./DqghtnId.js";const te={class:"space-y-6"},oe={class:"flex flex-wrap gap-4"},ae={class:"text-gray-400 truncate max-w-xs block"},ne={class:"flex items-center gap-2"},le={class:"capitalize"},se={class:"text-gray-400 text-sm"},re={key:0,class:"flex justify-center mt-4"},f=20,ye=Y({__name:"index",setup(ie){const g=K(),b=s([]),h=s(0),_=s(!0),r=s(1),i=s(""),c=s(""),u=s(""),T=[{label:"All Platforms",value:""},{label:"iOS",value:"ios"},{label:"Android",value:"android"},{label:"Web",value:"web"},{label:"Flutter",value:"flutter"}],C=[{label:"All Environments",value:""},{label:"Production",value:"production"},{label:"Staging",value:"staging"},{label:"Development",value:"development"}],S=[{key:"error_type",label:"Error Type"},{key:"error_message",label:"Message"},{key:"platform",label:"Platform"},{key:"app_version",label:"Version"},{key:"environment",label:"Env"},{key:"created_at",label:"Time"},{key:"actions",label:""}],d=async()=>{if(!g.apiKey.value){_.value=!1;return}try{_.value=!0;const t=await g.getCrashes({search:i.value||void 0,platform:c.value||void 0,environment:u.value||void 0,limit:f,offset:(r.value-1)*f});b.value=t.data||[],h.value=t.total}catch(t){console.error("Failed to load crashes:",t)}finally{_.value=!1}};V([i,c,u],()=>{r.value=1,d()}),V(r,d),Z(d);const N=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=t=>{switch(t){case"ios":return"i-simple-icons-apple";case"android":return"i-simple-icons-android";case"web":return"i-heroicons-globe-alt";case"flutter":return"i-simple-icons-flutter";default:return"i-heroicons-device-phone-mobile"}},A=async t=>{if(confirm("Are you sure you want to delete this crash?"))try{await g.deleteCrash(t.id),d()}catch(n){console.error("Failed to delete crash:",n)}};return(t,n)=>{const B=L,y=R,x=j,E=G,P=q,F=H,I=W,M=J,O=X,z=Q;return w(),k("div",te,[o(x,null,{default:a(()=>[m("div",oe,[o(B,{modelValue:l(i),"onUpdate:modelValue":n[0]||(n[0]=e=>v(i)?i.value=e:null),placeholder:"Search crashes...",icon:"i-heroicons-magnifying-glass",class:"w-64"},null,8,["modelValue"]),o(y,{modelValue:l(c),"onUpdate:modelValue":n[1]||(n[1]=e=>v(c)?c.value=e:null),options:T,"option-attribute":"label","value-attribute":"value",class:"w-40"},null,8,["modelValue"]),o(y,{modelValue:l(u),"onUpdate:modelValue":n[2]||(n[2]=e=>v(u)?u.value=e:null),options:C,"option-attribute":"label","value-attribute":"value",class:"w-40"},null,8,["modelValue"])])]),_:1}),o(x,null,{default:a(()=>[o(O,{rows:l(b),columns:S,loading:l(_),"empty-state":{icon:"i-heroicons-bug-ant",label:"No crashes found"}},{"error_type-data":a(({row:e})=>[o(E,{to:`/crashes/${e.id}`,class:"text-primary-500 hover:underline font-medium"},{default:a(()=>[D(p(e.error_type),1)]),_:2},1032,["to"])]),"error_message-data":a(({row:e})=>[m("span",ae,p(e.error_message),1)]),"platform-data":a(({row:e})=>[m("div",ne,[o(P,{name:$(e.platform),class:"w-4 h-4"},null,8,["name"]),m("span",le,p(e.platform),1)])]),"environment-data":a(({row:e})=>[o(F,{color:e.environment==="production"?"red":e.environment==="staging"?"yellow":"gray",size:"xs"},{default:a(()=>[D(p(e.environment),1)]),_:2},1032,["color"])]),"created_at-data":a(({row:e})=>[m("span",se,p(N(e.created_at)),1)]),"actions-data":a(({row:e})=>[o(M,{items:[[{label:"View Details",icon:"i-heroicons-eye",click:()=>("navigateTo"in t?t.navigateTo:l(U))(`/crashes/${e.id}`)},{label:"View Group",icon:"i-heroicons-rectangle-stack",click:()=>("navigateTo"in t?t.navigateTo:l(U))(`/groups/${e.group_id}`)},{label:"Delete",icon:"i-heroicons-trash",click:()=>A(e)}]]},{default:a(()=>[o(I,{icon:"i-heroicons-ellipsis-vertical",variant:"ghost",color:"gray"})]),_:1},8,["items"])]),_:1},8,["rows","loading"]),l(h)>f?(w(),k("div",re,[o(z,{modelValue:l(r),"onUpdate:modelValue":n[3]||(n[3]=e=>v(r)?r.value=e:null),total:l(h),"page-count":f},null,8,["modelValue","total"])])):ee("",!0)]),_:1})])}}});export{ye as default};
