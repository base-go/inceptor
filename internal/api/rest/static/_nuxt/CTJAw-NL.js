import{u as I,a as S,_ as B}from"./DhQdksfa.js";import{_ as R}from"./CpvovYk5.js";import{_ as M}from"./11PQt58c.js";import{_ as q}from"./BAT_9lwm.js";import{_ as K}from"./BibONXFg.js";import{_ as L}from"./C31K3EN0.js";import{_ as P}from"./lbA662FO.js";import{e as T,g as z,c as w,a as o,b as t,w as s,h as n,F as E,r as G,i as U,k as C,m as p,o as _,d as a,t as k}from"./C2I5neRf.js";import"./DqghtnId.js";import"./DlAUqK2U.js";const H={class:"space-y-6"},J={class:"flex items-center justify-between"},O={key:0,class:"flex items-center justify-center py-12"},Q={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},W={class:"flex items-start justify-between"},X={class:"text-lg font-semibold text-white"},Y={class:"text-sm text-gray-500 mt-1"},Z={class:"mt-4 space-y-2"},ee={class:"flex items-center justify-between text-sm"},te={class:"text-gray-300 font-mono text-xs"},oe={class:"flex items-center justify-between text-sm"},se={class:"text-gray-300"},le={class:"mt-4 pt-4 border-t border-gray-700"},ne={class:"space-y-4"},ae={class:"flex justify-end gap-2"},ie={class:"flex items-center gap-2 text-green-500"},re={class:"space-y-4"},de={class:"flex gap-2"},ue={class:"flex justify-end"},be=T({__name:"index",setup(me){const b=I(),A=p([]),f=p(!0),d=p(!1),u=p(""),c=p(30),i=p(null),V=async()=>{if(!b.apiKey.value){f.value=!1;return}try{f.value=!0;const r=await b.getApps();A.value=r.data||[]}catch(r){console.error("Failed to load apps:",r)}finally{f.value=!1}};z(V);const $=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),N=async()=>{if(u.value.trim())try{i.value=await b.createApp(u.value.trim(),c.value),d.value=!1,u.value="",c.value=30,V()}catch(r){console.error("Failed to create app:",r)}},D=()=>{i.value?.api_key&&navigator.clipboard.writeText(i.value.api_key)};return(r,e)=>{const m=S,y=B,j=R,x=M,v=q,g=K,h=L,F=P;return _(),w("div",H,[o("div",J,[e[9]||(e[9]=o("h2",{class:"text-xl font-semibold"},"Registered Apps",-1)),t(m,{icon:"i-heroicons-plus",onClick:e[0]||(e[0]=l=>d.value=!0)},{default:s(()=>[...e[8]||(e[8]=[a(" Create App ",-1)])]),_:1})]),n(f)?(_(),w("div",O,[t(y,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-primary-500"})])):n(A).length?(_(),w("div",Q,[(_(!0),w(E,null,G(n(A),l=>(_(),U(x,{key:l.id},{default:s(()=>[o("div",W,[o("div",null,[o("h3",X,k(l.name),1),o("p",Y,"Created "+k($(l.created_at)),1)]),t(y,{name:"i-heroicons-squares-2x2",class:"w-8 h-8 text-primary-500"})]),o("div",Z,[o("div",ee,[e[10]||(e[10]=o("span",{class:"text-gray-400"},"App ID",-1)),o("code",te,k(l.id.slice(0,8))+"...",1)]),o("div",oe,[e[11]||(e[11]=o("span",{class:"text-gray-400"},"Retention",-1)),o("span",se,k(l.retention_days)+" days",1)])]),o("div",le,[t(j,{to:`/?app_id=${l.id}`},{default:s(()=>[t(m,{variant:"ghost",size:"sm",class:"w-full"},{default:s(()=>[...e[12]||(e[12]=[a(" View Dashboard ",-1)])]),_:1})]),_:1},8,["to"])])]),_:2},1024))),128))])):(_(),U(x,{key:2,class:"text-center py-12"},{default:s(()=>[t(y,{name:"i-heroicons-squares-2x2",class:"w-12 h-12 mx-auto text-gray-600"}),e[14]||(e[14]=o("h3",{class:"mt-4 text-lg font-medium text-white"},"No apps registered",-1)),e[15]||(e[15]=o("p",{class:"mt-2 text-gray-400"},"Create your first app to start tracking crashes.",-1)),t(m,{class:"mt-4",onClick:e[1]||(e[1]=l=>d.value=!0)},{default:s(()=>[...e[13]||(e[13]=[a(" Create App ",-1)])]),_:1})]),_:1})),t(h,{modelValue:n(d),"onUpdate:modelValue":e[5]||(e[5]=l=>C(d)?d.value=l:null)},{default:s(()=>[t(x,null,{header:s(()=>[...e[16]||(e[16]=[o("h3",{class:"text-lg font-semibold"},"Create New App",-1)])]),footer:s(()=>[o("div",ae,[t(m,{variant:"ghost",onClick:e[4]||(e[4]=l=>d.value=!1)},{default:s(()=>[...e[17]||(e[17]=[a("Cancel",-1)])]),_:1}),t(m,{disabled:!n(u).trim(),onClick:N},{default:s(()=>[...e[18]||(e[18]=[a("Create",-1)])]),_:1},8,["disabled"])])]),default:s(()=>[o("div",ne,[t(g,{label:"App Name",required:""},{default:s(()=>[t(v,{modelValue:n(u),"onUpdate:modelValue":e[2]||(e[2]=l=>C(u)?u.value=l:null),placeholder:"My Flutter App"},null,8,["modelValue"])]),_:1}),t(g,{label:"Retention Days",hint:"How long to keep crash data"},{default:s(()=>[t(v,{modelValue:n(c),"onUpdate:modelValue":e[3]||(e[3]=l=>C(c)?c.value=l:null),type:"number",min:"1",max:"365"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["modelValue"]),t(h,{"model-value":!!n(i),"onUpdate:modelValue":e[7]||(e[7]=l=>i.value=null)},{default:s(()=>[t(x,null,{header:s(()=>[o("div",ie,[t(y,{name:"i-heroicons-check-circle",class:"w-6 h-6"}),e[19]||(e[19]=o("h3",{class:"text-lg font-semibold"},"App Created Successfully",-1))])]),footer:s(()=>[o("div",ue,[t(m,{onClick:e[6]||(e[6]=l=>i.value=null)},{default:s(()=>[...e[23]||(e[23]=[a("Done",-1)])]),_:1})])]),default:s(()=>[t(F,{color:"yellow",icon:"i-heroicons-exclamation-triangle",class:"mb-4"},{title:s(()=>[...e[20]||(e[20]=[a("Save your API key now!",-1)])]),description:s(()=>[...e[21]||(e[21]=[a(" This is the only time you'll see this API key. Store it securely. ",-1)])]),_:1}),o("div",re,[t(g,{label:"App Name"},{default:s(()=>[t(v,{"model-value":n(i)?.name,readonly:""},null,8,["model-value"])]),_:1}),t(g,{label:"API Key"},{default:s(()=>[o("div",de,[t(v,{"model-value":n(i)?.api_key,readonly:"",class:"flex-1 font-mono text-sm"},null,8,["model-value"]),t(m,{icon:"i-heroicons-clipboard-document",variant:"outline",onClick:D},{default:s(()=>[...e[22]||(e[22]=[a(" Copy ",-1)])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["model-value"])])}}});export{be as default};
