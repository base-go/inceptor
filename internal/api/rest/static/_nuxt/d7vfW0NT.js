import{_ as K}from"./BAT_9lwm.js";import{_ as P}from"./C29POXRi.js";import{u as q,a as z,_ as H}from"./DhQdksfa.js";import{_ as J}from"./11PQt58c.js";import{_ as Q}from"./Dvcp86dS.js";import{_ as W,a as X}from"./BLCJAzSU.js";import{_ as Y}from"./CpvovYk5.js";import{_ as Z}from"./C9xZg1J6.js";import{e as ee,f as $,g as te,c as B,b as o,w as a,m as l,o as D,a as p,k as v,h as n,R as O,t as c,d as k,l as oe}from"./C2I5neRf.js";import"./DlAUqK2U.js";import"./DqghtnId.js";const ae={class:"space-y-6"},se={class:"flex flex-wrap gap-4"},ne={class:"text-gray-400 truncate max-w-xs block"},le={class:"text-gray-400 text-sm"},re={class:"text-gray-400 text-sm"},ce={key:0,class:"flex justify-center mt-4"},g=20,xe=ee({__name:"index",setup(ue){const f=q(),V=l([]),b=l(0),m=l(!0),r=l(1),u=l(""),i=l(""),_=l("last_seen"),d=l("desc"),F=[{label:"All Statuses",value:""},{label:"Open",value:"open"},{label:"Resolved",value:"resolved"},{label:"Ignored",value:"ignored"}],I=[{label:"Last Seen",value:"last_seen"},{label:"First Seen",value:"first_seen"},{label:"Occurrences",value:"occurrence_count"}],L=[{key:"status",label:"Status"},{key:"error_type",label:"Error Type"},{key:"error_message",label:"Message"},{key:"occurrence_count",label:"Count"},{key:"first_seen",label:"First Seen"},{key:"last_seen",label:"Last Seen"},{key:"actions",label:""}],y=async()=>{if(!f.apiKey.value){m.value=!1;return}try{m.value=!0;const t=await f.getGroups({search:u.value||void 0,status:i.value||void 0,sort_by:_.value,sort_order:d.value,limit:g,offset:(r.value-1)*g});V.value=t.data||[],b.value=t.total}catch(t){console.error("Failed to load groups:",t)}finally{m.value=!1}};$([u,i,_,d],()=>{r.value=1,y()}),$(r,y),te(y);const w=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=t=>new Intl.NumberFormat().format(t),G=t=>{switch(t){case"open":return"red";case"resolved":return"green";case"ignored":return"gray";default:return"gray"}},h=async(t,s)=>{try{await f.updateGroup(t.id,{status:s}),t.status=s}catch(x){console.error("Failed to update status:",x)}};return(t,s)=>{const x=K,U=P,S=z,C=J,M=H,N=Q,T=W,A=Y,E=Z,j=X;return D(),B("div",ae,[o(C,null,{default:a(()=>[p("div",se,[o(x,{modelValue:n(u),"onUpdate:modelValue":s[0]||(s[0]=e=>v(u)?u.value=e:null),placeholder:"Search errors...",icon:"i-heroicons-magnifying-glass",class:"w-64"},null,8,["modelValue"]),o(U,{modelValue:n(i),"onUpdate:modelValue":s[1]||(s[1]=e=>v(i)?i.value=e:null),options:F,"option-attribute":"label","value-attribute":"value",class:"w-40"},null,8,["modelValue"]),o(U,{modelValue:n(_),"onUpdate:modelValue":s[2]||(s[2]=e=>v(_)?_.value=e:null),options:I,"option-attribute":"label","value-attribute":"value",class:"w-40"},null,8,["modelValue"]),o(S,{icon:n(d)==="desc"?"i-heroicons-bars-arrow-down":"i-heroicons-bars-arrow-up",variant:"ghost",onClick:s[3]||(s[3]=e=>d.value=n(d)==="desc"?"asc":"desc")},null,8,["icon"])])]),_:1}),o(C,null,{default:a(()=>[o(E,{rows:n(V),columns:L,loading:n(m),"empty-state":{icon:"i-heroicons-rectangle-stack",label:"No crash groups found"}},{"status-data":a(({row:e})=>[o(T,{items:[[{label:"Open",click:()=>h(e,"open")},{label:"Resolved",click:()=>h(e,"resolved")},{label:"Ignored",click:()=>h(e,"ignored")}]]},{default:a(()=>[o(N,{color:G(e.status),class:"cursor-pointer"},{default:a(()=>[k(c(e.status)+" ",1),o(M,{name:"i-heroicons-chevron-down",class:"w-3 h-3 ml-1"})]),_:2},1032,["color"])]),_:2},1032,["items"])]),"error_type-data":a(({row:e})=>[o(A,{to:`/groups/${e.id}`,class:"text-primary-500 hover:underline font-medium"},{default:a(()=>[k(c(e.error_type),1)]),_:2},1032,["to"])]),"error_message-data":a(({row:e})=>[p("span",ne,c(e.error_message),1)]),"occurrence_count-data":a(({row:e})=>[o(N,{color:"red"},{default:a(()=>[k(c(R(e.occurrence_count)),1)]),_:2},1024)]),"first_seen-data":a(({row:e})=>[p("span",le,c(w(e.first_seen)),1)]),"last_seen-data":a(({row:e})=>[p("span",re,c(w(e.last_seen)),1)]),"actions-data":a(({row:e})=>[o(T,{items:[[{label:"View Details",icon:"i-heroicons-eye",click:()=>("navigateTo"in t?t.navigateTo:n(O))(`/groups/${e.id}`)},{label:"View Crashes",icon:"i-heroicons-bug-ant",click:()=>("navigateTo"in t?t.navigateTo:n(O))(`/crashes?group_id=${e.id}`)}]]},{default:a(()=>[o(S,{icon:"i-heroicons-ellipsis-vertical",variant:"ghost",color:"gray"})]),_:1},8,["items"])]),_:1},8,["rows","loading"]),n(b)>g?(D(),B("div",ce,[o(j,{modelValue:n(r),"onUpdate:modelValue":s[4]||(s[4]=e=>v(r)?r.value=e:null),total:n(b),"page-count":g},null,8,["modelValue","total"])])):oe("",!0)]),_:1})])}}});export{xe as default};
